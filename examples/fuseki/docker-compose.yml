version: "2"
services:
  fuseki:
    image: atomgraph/fuseki
    ports:
      - 3030:3030
    volumes:
      - ./fuseki.ttl:/mnt/apache-fuseki/configuration/fuseki.ttl:ro
      - ./dataset.ttl:/tmp/data/dataset.ttl:ro
    command: ["--config", "/mnt/apache-fuseki/configuration/fuseki.ttl"]
  processor:
    image: atomgraph/processor
    depends_on:
      - fuseki
    ports:
      - 8080:8080
    environment:
      - JPDA_ADDRESS=8000 # debugger port
      - ENDPOINT="http://fuseki:3030/ds/" # hostname equals service name
      - GRAPH_STORE="http://fuseki:3030/ds/" # hostname equals service name
      - ONTOLOGY="https://www.w3.org/ns/ldt/core/templates#"